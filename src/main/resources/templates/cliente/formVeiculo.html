<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/LayoutPadrao">
<head>
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<script src="http://code.jquery.com/jquery-2.0.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<meta charset="UTF-8"/>
<title>Adicionar Veículo</title>
</head>

<script type="text/javascript">

	(document).ready(function($) {
		$("#search").change(function(event) {
	
			// Prevent the form from submitting via the browser.
			listarModelos();
	
		});
	});

  fuction listarModelos(){

		var marca ´$("#search").value();

		$.ajax({

			type: "GET",
			url: "cliente/listarModelos",
			data: listarModelos,
			sucess:function(data){
				console.log("SUCESS", marca);
				display(e);
				
				var html = '<option value=""></option>';
				var len = data.length;
				
				for ( var i = 0; i < len; i++) {
					html += '<option value="' + data[i] + '">'
							+ data[i] + '</option>';
				}
				html += '</option>';
	                        //now that we have our 
			}

		});
  }
	
</script>
<body>
	
	<section layout:fragment="conteudo">
	<div class="col-sm-9 col-md-10">
		<h1>Cadastro de veículo</h1>
	</div>
	
	<div class="row"></div>
	
	<div class="col-sm-9 col-md-10">
		<form  th:action="@{/cliente/novoVeiculo}" th:object="${veiculo}" method="post">
			<div>
				
				<div>
					<div>Chassi e Placa:</div>
					<input type="text"  th:field="*{numeroChassi}"/>
								
					<input type="text"  th:field="*{placa}"/>
				</div>
				
				<div>
					<div><span>Cor:</span></div>
					<input type="text" th:field="*{cor}"/>
				</div>
				
				<div>
					<div><span>Marca:</span></div>
					<select id="search" th:field="*{marcaModelo.marca}">
						<option th:each="marca : ${marcas}" th:text="${marca}" th:value="${marca}"></option>
					</select>
				</div>
				
				<div>
					<div><span>Modelo:</span></div>
					<select id="modelo" th:field="*{marcaModelo.modelo}" >
						<option  th:value="${modelo}"></option>
					</select>
				</div>
				
				
				<div>
					<div><span>Ano de fabricação:</span></div>
					<input type="text"  th:field="*{ano}"/>
				</div>
				
				<div>
					<input type="submit" value="Cadastrar Veículo"/>
				</div>
				
			</div>
		
		</form>
	</div>
	
	</section>
</body>
</html>